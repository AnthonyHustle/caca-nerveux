<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Caca Nerveux - Stop the Drama</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div id="auth-container" class="main-view">
        <div class="content-container">
            <div class="card" style="max-width: 400px; margin: auto;">
                <h1>Connexion üí©</h1>
                <p style="margin-bottom: 20px; color: var(--text-secondary);">Inscris-toi ou connecte-toi pour signaler un drama.</p>
                
                <div class="input-group">
                    <label>Email Pro</label>
                    <input type="email" id="auth-email" placeholder="email@entreprise.com">
                </div>
                
                <div class="input-group">
                    <label>Mot de passe</label>
                    <input type="password" id="auth-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
                
                <button onclick="handleSignIn()" style="margin-bottom: 10px;">Se connecter</button>
                <button onclick="handleSignUp()" style="background: transparent; color: var(--text-secondary); border: 1px solid var(--border-color);">S'inscrire</button>
            </div>
        </div>
    </div>

    <div id="app-content" style="display: none;">
    
    <nav class="mobile-nav">
        <button onclick="showSection('report')">üè† Alerte</button>
        <button onclick="showSection('inbox')">üì• Inbox</button>
        <button onclick="showSection('profile')">üë§ Profil</button>
    </nav>

    <main class="main-view">
        <section class="content-container">
            
            <div id="section-report" class="app-section">
                <div class="card">
                    <h3>üí© Report a "Caca Nerveux"</h3>
                    <div class="input-group">
                        <label>Qui surr√©agit ?</label>
                        <input type="text" id="recipient" placeholder="Nom du coll√®gue...">
                    </div>
                    <div class="input-group">
                        <label>Description</label>
                        <textarea id="message" rows="3" placeholder="Que se passe-t-il ?"></textarea>
                    </div>
                    <button onclick="sendMessage()">Envoyer l'alerte</button>
                </div>
            </div>

            <div id="section-inbox" class="app-section" style="display:none;">
                <div class="card">
                    <h3>üì• Tes Cacas Re√ßus</h3>
                    <div id="empty-inbox-msg">
                        <p>Zen... aucun drama re√ßu pour l'instant.</p>
                    </div>
                    <div id="messages-list"></div>
                </div>
            </div>

            <div id="section-profile" class="app-section" style="display:none;">
                <div class="card">
                    <h3>üë§ Ton Profil</h3>
                    <p id="user-display" style="margin-bottom: 20px; font-weight: bold;"></p>
                    <hr style="opacity: 0.1; margin-bottom: 20px;">
                    <h4>Param√®tres</h4>
                    <p style="font-size: 0.8rem; color: gray; margin-bottom: 20px;">Version App: 1.0.0 (Beta)</p>
                    <button onclick="handleSignOut()" style="background: #ef4444;">Se d√©connecter</button>
                </div>
            </div>

        </section>
    </main>
</div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="script.js"></script>
</body>

</html>